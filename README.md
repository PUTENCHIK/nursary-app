# Приложение питомника для собак nursery-app
## Описание
nursary-app - это простое Python-приложение, написанное на фреймворке FastAPI и использованием локальной базы данных SQLite.

Приложение позволит пользователям проходить регистрацию или входить в уже созданную учётную запись, добавлять в базу задания, привязанные к зарегистрированным ошейникам, оставлять отклики на задания других пользователей, а также отмечать один отклик к своим заданиям как подтверждённые. Также пользователь имеет возможность получить актуальную информацию про собаку и про задания.

## Сценарии действий
### Действия с учётной записью
1. Регистрация пользователя: указание уникального логина и пароля; также, при желании сделать аккаунт "админским", необходимо указать специальный токен.
2. Вход в аккаунт: пользователь указывает логин и пароль, при успешной авторизации или регистрации возвражается токен аккаунта, который будет использоваться для верификации пользователя в других функциях.
3. Изменение полей аккаунта: при желании пользователь способен поменять логи и/или пароль аккаунта, для чего необходимо передать актуальные логин и пароль.
4. Удаление аккаунта: при указании валидных логина и пароля происходит мягкое удаление учётной записи из БД.

### Регистрация собак и ошейников
Этот блок функционала доступен только пользователям-админам
1. Регистрация собаки: при указании имени и описания известного места обитания возвращается id новой записи о собаке.
2. Регистрация ошейника: передаётся заводской код ошейника, необходимый в дальнейшем для определения его местоположения с помощью GPS; возвращается id новой записи.
3. Связывание ошейника и собаки: при надевании ошейника на зарегистрированную собаку в БД добавляется запись о том, что ошейник теперь ассоциируется с собакой и отмечается дата добавления записи. Пока этот ошейник связан с собакой, пользователи имеют возможность упоминать его в своих заданиях и получать данные о его местоположении.
4. Удаление собаки: при передаче id собака помечается как удалённая; после этого её id нельзя будет использовать для заданий; если удаляемая собака была связана с ошейником, то ошейник отвязывается от собаки.
5. Удаление ошейника: идентично удалению собаки: запись помечается как удалённая, а у записи связи с собакой, если такая существует, отмечается время конца использования ошейника собакой.
6. Удаление связи ошейника и собаки: если передаваемые id собаки и ошейника существуют, то в записи их связи отмечается дата и время конца эксплуатации и, таким образом, запись считается удалённой.

### Действия с заданиями
1. Добавление задания: пользователь указывает текст задания и id ошейника. Если ошейник используется собакой, то задание добавляется в базу.
2. Добавление отклика на задание: пользователь указывает id задания и ссылку на изображение, которое является подтверждением выполнения задания.
3. Подтверждение отклика: пользователь может отметить отклик на своё задание как подтверждённый. Не разрешается подтверждать несколько откликов на одно задание.
4. Удаление задания: указывается id задания, и если его пытается удалить именно автор задания и оно ещё не имеет откликов, то запись задания помечается как удалённая.
5. Удаление отклика: аналогично с удалением задания, отклик может удалить только его автор и если отклик не подтверждён автором задания.

## Документация
Файлы документации:
* [Протокол][protocol_md] запросов и ответов приложения.
* [Структура][database_md] базы данных и её описание.

[protocol_md]: PROTOCOL.md
[database_md]: DATABASE.md
